<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>数据传输测试</title>
<!-- 注意：
flash查询中：
１、url不包含浏览器转过意的符号，否则易出错！
２、对数据量有限制！
 -->
<script src="../js/jquery/jquery-1.9.1.min.js"></script>
<script src="../js/common/json2.js"></script>
<!-- 包含头部信息用于适应不同设备 -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- 包含 bootstrap 样式表 -->
<link href="../js/bootstrap337/css/bootstrap.min.css" rel="stylesheet">

<!-- jQuery (Bootstrap 的 JavaScript 插件需要引入 jQuery) -->
<script src="../js/jquery/jquery-1.9.1.min.js"></script>
<!-- 包括所有已编译的插件 -->
<script src="../js/bootstrap337/js/bootstrap.min.js"></script>
<script type="text/javascript" src="flashHttpService/swfobject.js"></script>
       <script type="text/javascript">
            var swfVersionStr = "11.1.0";
            var xiSwfUrlStr = "flashHttpService/playerProductInstall.swf";
            var flashvars = {};
            var params = {};
            params.quality = "high";
            params.bgcolor = "#ffffff";
            params.allowscriptaccess = "sameDomain";
            params.allowfullscreen = "true";
            var attributes = {};
            attributes.id = "httpServiceUtil";
            attributes.name = "httpServiceUtil";
            attributes.align = "middle";
            swfobject.embedSWF(
                "flashHttpService/httpServiceUtil.swf", "flashContent", 
                "100%", "100%", 
                swfVersionStr, xiSwfUrlStr, 
                flashvars, params, attributes);
            swfobject.createCSS("#flashContent", "display:block;text-align:left;");
        </script>
<script type="text/javascript">
function jsToFlex(){
	//document.getElementById("${application}").sendRequest({p1:11,p2:22});
	var fl=document.getElementById("httpServiceUtil");
	if(fl){
		fl.sendHTTPService({url:"http://192.168.15.83:8083/dgsp/rest/system/getSystemMenuInfo/1080?d=1479953941870"});
	}else{
		alert("swf加载失败");
	}
	
}

	$(function(){
		document.getElementById("bz").value="http://127.0.0.1:8000/proxyPage/test/common/ajax.html"+"\n"+
				"http://127.0.0.1:8000/proxy19216815838083/dgsp/rest/system/getSystemMenuInfo/1080?d=14799539418"+"\n"+
				"http://127.0.0.1:8000/proxy1127413458083/dgsp/rest/system/getSystemMenuInfo/1080?d=14799539418"+"\n"+
				"http://127.0.0.1:8000/proxy1270018083/test/rest/TestRests/getAjaxData?d=2191"+"\n"+
				"http://192.168.15.83:6080/arcgis/rest/services/BaseMap/xm_sghy_xzqy/MapServer/2/query?f=json&where=1=1%20&returnGeometry=false&returnIdsOnly=false&outFields=*"+"\n"+
				""+"\n"+
				""+"\n";
		var arr=[{label:"otherGet",value:"otherGet",url:"http://192.168.15.83:6080/arcgis/rest/services/BaseMap/xm_sghy_xzqy/MapServer/2/query?f=json&where=1=1%20&returnGeometry=false&returnIdsOnly=false&outFields=*",param:""},
		         {label:"otherPost",value:"otherPost",url:"http://192.168.15.83:6080/arcgis/rest/services/BaseMap/xm_sghy_xzqy/MapServer/2/query?f=json&where=1=1%20&returnGeometry=false&returnIdsOnly=false&outFields=*",param:""},
		         {label:"ajaxGet",value:"ajaxGet",url:"http://127.0.0.1:8083/test/rest/TestRests/getAjaxData"+"?d="+Math.floor(Math.random()*10000),param:""},
		         {label:"ajaxGetWithParam",value:"ajaxGetWithParam",url:"http://127.0.0.1:8083/test/rest/TestRests/getAjaxDataWithParam"+"/"+"参数"+"?d="+Math.floor(Math.random()*10000),param:""},
		         {label:"ajaxGetWithParam2",value:"ajaxGetWithParam2",url:"http://127.0.0.1:8083/test/rest/TestRests/getAjaxDataWithParam2"+"/"+"参数/34"+"?d="+Math.floor(Math.random()*10000),param:{p1:22,p2:22}},
		         {label:"ajaxPost",value:"ajaxPost",url:"http://127.0.0.1:8083/test/rest/TestRests/getAjaxPost"+"?d="+Math.floor(Math.random()*10000),param:{p1:12,p2:22}},
		         {label:"ajaxPostWithParam",value:"ajaxPostWithParam",url:"http://127.0.0.1:8083/test/rest/TestRests/getAjaxPostWithParam"+"/"+"参数"+"?d="+Math.floor(Math.random()*10000),param:""},
		         {label:"ajaxPostWithParam2",value:"ajaxPostWithParam2",url:"http://127.0.0.1:8083/test/rest/TestRests/getAjaxPostWithParam2"+"/"+"参数/67"+"?d="+Math.floor(Math.random()*10000),param:{p1:22,p2:22}},
		         {label:"ajaxJsonp",value:"ajaxJsonp",url:"http://" + "127.0.0.1"+":" + "8083" + "/test/rest/TestRests/getAjaxJsonpData"+"?d="+Math.floor(Math.random()*10000),param:""},
		         {label:"ajaxJsonpWithParam",value:"ajaxJsonpWithParam",url:"http://" + "127.0.0.1"+":" + "8083" + "/test/rest/TestRests/getAjaxJsonpDataWithParam"+"/"+"参数"+"?d="+Math.floor(Math.random()*10000),param:{p1:22,p2:22}},
		         {label:"ajaxJsonpWithParam2",value:"ajaxJsonpWithParam2",url:"http://" + "127.0.0.1"+":" + "8083" + "/test/rest/TestRests/getAjaxJsonpDataWithParam2"+"/"+"参数/78"+"?d="+Math.floor(Math.random()*10000),param:{p1:22,p2:22}},
		         {label:"customAjaxJsonpWithParam",value:"customAjaxJsonpWithParam",url:"http://" + "127.0.0.1"+":" + "8083" + "/test/rest/TestRests/getCustomAjaxJsonpWithParam"+"/"+"参数/78/f"+"?d="+Math.floor(Math.random()*10000),param:{p1:22,p2:22,jsonp:'f_'}},
		         {label:"customAjaxJsonpWithJP",value:"customAjaxJsonpWithJP",url:"http://" + "127.0.0.1"+":" + "8083" + "/test/rest/TestRests/getCustomAjaxJsonpWithParam"+"/"+"参数/78/f"+"?d="+Math.floor(Math.random()*10000),param:{p1:22,p2:22,jsonp:'successJsonpEmptyCallback'}},
		         {label:"formPostRequestWithParam",value:"formPostRequestWithParam",url:"http://127.0.0.1:8083/test/rest/TestRests/getAjaxPostWithParam2"+"/"+"参数/67"+"?d="+Math.floor(Math.random()*10000),param:{p1:22,p2:22}},
		         {label:"formGetRequestWithParam",value:"formGetRequestWithParam",url:"http://127.0.0.1:8083/test/rest/TestRests/getAjaxDataWithParam2"+"/"+"参数/34"+"?d="+Math.floor(Math.random()*10000),param:{p1:22,p2:22}},
		         {label:"javaRestData",value:"javaRestData",url:"http://127.0.0.1:8083/test/rest/TestRests/getJavaRestData"+"/"+"参数/34"+"?d="+Math.floor(Math.random()*10000),param:{url:"http://192.168.15.83:6080/arcgis/rest/services/ApvlMap/xm_sghy_zdxm/MapServer/0",where:"1=1",geometry:"",outFields:"*",returnGeometry:"false",p1:22,p2:22}},
		         {label:"javaGetData",value:"javaGetData",url:"http://127.0.0.1:8083/test/rest/TestRests/getJavaGetData"+"/"+"参数/34"+"?d="+Math.floor(Math.random()*10000),param:{url:"http://192.168.15.83:6080/arcgis/rest/services/ApvlMap/xm_sghy_zdxm/MapServer/0",p1:22,p2:22}},
		         {label:"javaPostData",value:"javaPostData",url:"http://127.0.0.1:8083/test/rest/TestRests/getJavaPostData"+"/"+"参数/34"+"?d="+Math.floor(Math.random()*10000),param:{url:"http://192.168.15.83:6080/arcgis/rest/services/ApvlMap/xm_sghy_zdxm/MapServer/0",p1:22,p2:22}},
		         {label:"flashHttpService",value:"flashHttpService",param:{url:"http://192.168.15.83:8083/dgsp/rest/system/getSystemMenuInfo/1080?d=1479953941870",parms:null,restMethod:'GET',resultFormat:'text',contentType:'application/json'}},
		         {label:"nginxProxy",value:"nginxProxy",param:{url:"http://127.0.0.1:8000/proxy19216815838083/dgsp/rest/system/getSystemMenuInfo/1080?d=14799539418",type:"GET",param:{p1:11,p2:22}}},
		         {label:"",value:"",url:"",param:""},
		         {label:"",value:"",url:"",param:""}];
		for(var i=0;i<arr.length;i++){
			document.getElementById("selAjaxTypeId").options.add(new Option(arr[i].label,arr[i].value));
		}
		$('#ajaxTypeData').val(JSON.stringify(arr));
	});
	
	function radioCheck(event){
//		debugger;
//		var rad=event.currentTarget;
//		rad.checked;
		var arr=JSON.parse($('#ajaxTypeData').val());
		var result=[];
		var radios = document.getElementsByName('radio');
        for (var i = 0; i < radios.length ; i++ )
        {
            if(radios[i].checked)
            {
            	if(radios[i].value=='all'){
            		result=arr;
            		break;
            	}
            	for (var j=0;j<arr.length;j++){
            		if(arr[j].value.toLowerCase().indexOf(radios[i].value.toLowerCase())>-1){
            			result.push(arr[j]);
            		}
            	}
            }
        }
        document.getElementById("selAjaxTypeId").options.length=0;    
        for(var k=0;k<result.length;k++){
			document.getElementById("selAjaxTypeId").options.add(new Option(result[k].label,result[k].value));
		}
        document.getElementById("selAjaxTypeId").options[0].selected=true;
        ajaTypeChoice(null);
	}
	
	function ajaTypeChoice(event){
//		debugger;
//		var sel=event.currentTarget.options;//[option, option, selectedIndex: 1]
//		var selObj=event.currentTarget;
		var selects=document.getElementById("selAjaxTypeId");
		var index = selects.selectedIndex; // 选中索引
		var text = selects.options[index].text; // 选中文本
		var selValue = selects.options[index].value; // 选中值
		var arr=$('#ajaxTypeData').val();
		arr=JSON.parse(arr);
		if(selValue=='otherGet'||selValue=='otherPost'){
			document.getElementById('isDefaultInput').checked=false;
			document.getElementById("queryUrl").disabled = false;
			document.getElementById("paramArea").disabled = false;
		}else{
			document.getElementById('isDefaultInput').checked=true;
			document.getElementById("queryUrl").disabled = true;
			document.getElementById("paramArea").disabled = true;
		}
		var selp={};
		for(var i=0;i<arr.length;i++){
			if(arr[i].value==selValue){
				selp=arr[i];
				break;
			}
		}
		$('#queryUrl').val(selp.url);
		var str=jsonStringify(selp.param,4);

		// $('#paramArea').val(JSON.stringify(selp.param));
		$('#paramArea').val(str);
		$('#selectedAjaxTypeData').val(JSON.stringify(selp));
		
	}
	
	function doAjaxGet(p){
		$.ajax({
	          url:p.url,
	          data: '',
	          dataType:"json",
	          type:"GET", 
	          success:function(data){
	        	  document.getElementById('result1Div').style['backgroundColor']='#32CD32';
	        	  document.getElementById('result1').value=JSON.stringify(data);
	        	  setQueryState("查询成功","#32CD32");
	          },
	          error:function (XMLHttpRequest, textStatus, errorThrown) {
	        	    // 通常 textStatus 和 errorThrown 之中
	        	    document.getElementById('result1Div').style['backgroundColor']='#CC0000';
	        	    document.getElementById('result1').value=textStatus;
	        	    setQueryState("查询失败","#CC0000");
	        	}
	       });
	}
	
	function doAjaxGetWithParam(p){
		$.ajax({
	          url:p.url,
	          data:p.param,
	          dataType:"json",
	          type:"GET", 
	          success:successCallback,
	          error:errorCallback
	       });
	}
	
	function doAjaxGetWithParam2(p){
		$.ajax({
	          url:p.url,
	          data:p.param,
	          dataType:"json",
	          type:"GET", 
	          success:successCallback,
	          error:errorCallback
	       });
	}
	
	function doAjaxPost(p){
		$.ajax({
	          url:p.url,
	          data: p.param,
	          dataType:"json",
	          type:"POST", 
	          success:successCallback,
	          error:errorCallback
	       });
	}
	
	function doAjaxPostWithParam(p){
		$.ajax({
	          url:p.url,
	          data: p.param,
	          dataType:"json",
	          type:"POST", 
	          success:successCallback,
	          error:errorCallback
	       });
	}
	
	function doAjaxPostWithParam2(p){
		$.ajax({
	          url:p.url,
	          data: p.param,
	          dataType:"json",
	          type:"POST", 
	          success:successCallback,
	          error:errorCallback
	       });
	}
	
	function doFormPostRequestWithParam(p){
		var post=function(url,param){
		    var temp = document.createElement("form");
		    temp.action = url;
		    temp.method = "post";
		    temp.style.display = "none";
		    for (var k in param) {
		       var opt = document.createElement("textarea");
		       opt.name = k;
		       opt.value = param[k];
		       temp.appendChild(opt);
		    }
		    document.body.appendChild(temp);
		    temp.submit();
		};

		var apiUrl = p.url + '&callback=?';
		var params = {"p1":11, "p2":22};
	     // 直接调用post方法即可
	     post(apiUrl, params);
	}
	
	function doFormGetRequestWithParam(p){
		var post=function(url,param){
		    var temp = document.createElement("form");
		    temp.action = url;
		    temp.method = "get";
		    temp.style.display = "none";
		    for (var k in param) {
		       var opt = document.createElement("textarea");
		       opt.name = k;
		       opt.value = param[k];
		       temp.appendChild(opt);
		    }
		    document.body.appendChild(temp);
		    temp.submit();
//		    history.go(-1);
		};

		var apiUrl = p.url + '&callbackparam=successFormGetRequestWithParam';
		var params = {"p1":11, "p2":22};
	     // 直接调用post方法即可
	     post(apiUrl, params);
	}
	
	function doJavaGetData(p){
		$.ajax({
	          url:p.url,
	          data: p.param,
	          dataType:"json",
	          type:"GET", 
	          success:successCallback,
	          error:errorCallback
	       });
	}
	function doJavaPostData(p){
		$.ajax({
	          url:p.url,
	          data: p.param,
	          dataType:"json",
	          type:"POST", 
	          success:successCallback,
	          error:errorCallback
	       });
	}
	function doJavaRestData(p){
		$.ajax({
	          url:p.url,
	          data: p.param,
	          dataType:"json",
	          type:"POST", 
	          success:successCallback,
	          error:errorCallback
	       });
	}
	
	function doNginxProxy(p){
		$.ajax({
	          url:p.param.url,
	          data: p.param.param,
	          dataType:"json",
	          type:p.param.type, 
	          success:successCallback,
	          error:errorCallback
	       });
	}
	
	function doFlashHttpService(p){
		if(!p || !p.hasOwnProperty('param')||!p.param.hasOwnProperty('url')){
			alert("参数有误，无法执行");
			setQueryState("参数有误","#CC0000");
			return;
		}
		var fl=document.getElementById("httpServiceUtil");
		if(fl){
			try{
				fl.sendHTTPService(p.param);
			}catch(ReferenceError){
				alert("flash加载失败！");
				setQueryState("flash加载失败","#CC0000");
			}
			
		}else{
			alert("httpServiceUtil.swf加载失败");
			setQueryState("httpServiceUtil.swf加载失败","#CC0000");
		}
	}
	
	function sendHttpServiceResultToJs(data){
		document.getElementById('result1Div').style['backgroundColor']='#32CD32';
  	    document.getElementById('result1').value=JSON.stringify(data);
  	    setQueryState("查询成功","#32CD32");
	}
	
	function successFormGetRequestWithParam(data){
//		debugger;
		document.getElementById('result1Div').style['backgroundColor']='#32CD32';
  	    document.getElementById('result1').value=JSON.stringify(data);
  	    setQueryState("查询成功","#32CD32");
	}
	
	function doAjaxJsonp(p){
		var url = "http://" + "127.0.0.1"+":" + "8083" + "/test/rest/TestRests/getAjaxJsonpData";
		 url=encodeURI(encodeURI(p.url)); 
		$.ajax({
           type: "get",
           url: url,
           data: '',
           jsonp:"callbackparam",
           jsonpCallback:"successAjaxJsonpCallback",
           dataType: "jsonp",
           success: function(data, textStatus, jqXHR){
        	   this;//param
        	   document.getElementById('result1Div').style['backgroundColor']='#32CD32';
         	   document.getElementById('result1').value=JSON.stringify(data);
         	   setQueryState("查询成功","#32CD32");
  //          	debugger;
//            	var aa=data;
            },
            statusCode:{200:function(d1,d2,d3){
            	//参数类似error
            	//d1:{readyState: 4, status: 200, statusText: "success"}
    	    	//d2 = "parsererror"
  //          	debugger;
            }},
           error:errorCallback
       });
		
	}
	
	function successAjaxJsonpCallback(data){
//		debugger;
		document.getElementById('result1Div').style['backgroundColor']='#32CD32';
  	    document.getElementById('result1').value=JSON.stringify(data);
  	    setQueryState("查询成功","#32CD32");
	}
	
	/**
		带参数的跨域
	**/
	function doAjaxJsonpWithParam(p){
		
		$.getJSON(p.url+ "&callbackparam=?",p.param, function(data) { 
			document.getElementById('result1Div').style['backgroundColor']='#32CD32';
	  	    document.getElementById('result1').value=JSON.stringify(data);
	  	    setQueryState("查询成功","#32CD32");
//			debugger;
		});
		return;
		var url = "http://" + "127.0.0.1"+":" + "8083" + "/test/rest/TestRests/getAjaxJsonpDataWithParam";
		 url=encodeURI(encodeURI(p.url)); 
		$.ajax({
           type: "get",
           url: url,
           processData:false,
           data: p.param,
           jsonp:"callbackparam",
           jsonpCallback:"successAjaxJsonpWithParamComeback",
           dataType: "jsonp",
//           success:successJsonpCallback,
           error:errorCallback
       });
	}
	
	function successAjaxJsonpWithParamComeback(data){
//		debugger;
		document.getElementById('result1Div').style['backgroundColor']='#32CD32';
  	    document.getElementById('result1').value=JSON.stringify(data);
  	    setQueryState("查询成功","#32CD32");
	}
	
	/**
	带参数的跨域
**/
function doAjaxJsonpWithParam2(p){
	var url = "http://" + "127.0.0.1"+":" + "8083" + "/test/rest/TestRests/getAjaxJsonpDataWithParam"+"/9";
	 url=encodeURI(encodeURI(p.url)); 
	$.ajax({
       type: "get",
       url: url,
       data: p.param,
       jsonp:"callbackparam",
//       jsonpCallback:"successAjaxJsonpWithParam2",//可以不用此参数，直接使用success方法
       dataType: "jsonp",
       success: function(data, textStatus, jqXHR){
    	   this;//param
    	   document.getElementById('result1Div').style['backgroundColor']='#32CD32';
     	   document.getElementById('result1').value=JSON.stringify(data);
     	   setQueryState("查询成功","#32CD32");
//        	debugger;
//        	var aa=data;
        },
        statusCode:{200:function(d1,d2,d3){
        	//参数类似error
        	//d1:{readyState: 4, status: 200, statusText: "success"}
	    	//d2 = "parsererror"
 //       	debugger;
        }},
       error:errorCallback
   });
}
	
	//后台优先使用jsonp属性作为jsonp值
	function doCustomAjaxJsonpWithParam(p){
		var url;
		url=encodeURI(encodeURI(p.url)); 
		if(p.param.hasOwnProperty('jsonp')){
			if(!p.param.jsonp){
				p.param.jsonp='';
			}
		}else{
			p.param.jsonp='';
		}
		$.ajax({
	       type: "get",
	       url: url,
	       data: p.param,
	       processData:false,
//	       jsonp:p.param.jsonp,//后台f_jsonp属性
	       jsonpCallback:"successCustomAjaxJsonpWithParam",//successJsonpCallback
	       dataType: "jsonp",
	       success: function(data){
	        	debugger;
	        	document.getElementById('result1Div').style['backgroundColor']='#32CD32';
	      	    document.getElementById('result1').value=JSON.stringify(data);
	      	    setQueryState("查询成功","#32CD32");
	        },
	       statusCode:{200:function(XMLHttpRequest, textStatus, errorThrown){
	        	//d1:{readyState: 4, status: 200, statusText: "success"}
		    	//d2 = "parsererror"
	        	debugger;
	        	if(XMLHttpRequest.statusText=="success" && XMLHttpRequest.responseText!=undefined){//hasOwnProperty
	        		document.getElementById('result1Div').style['backgroundColor']='#ADFF2F';
    	    	    document.getElementById('result1').value=XMLHttpRequest.responseText;
	    	    }else{
	    	    	 document.getElementById('result1Div').style['backgroundColor']='#CC0000';
	    	 	     document.getElementById('result1').value=XMLHttpRequest.status+":"+XMLHttpRequest.statusText+"\n"+errorThrown;
	    	    }
	        }},
	       error:function(XMLHttpRequest, textStatus, errorThrown) {
	   	    // 通常 textStatus 和 errorThrown 之中
	   	    // 只有一个会包含信息
	   	    this; // 调用本次AJAX请求时传递的options参数
	   	    debugger;
		   	 if(XMLHttpRequest.statusText=="success" && XMLHttpRequest.responseText!=undefined){//hasOwnProperty
	     			document.getElementById('result1Div').style['backgroundColor']='#ADFF2F';
		    	    document.getElementById('result1').value=XMLHttpRequest.responseText;
	 	    }else{
	 	    	 document.getElementById('result1Div').style['backgroundColor']='#CC0000';
	 	 	     document.getElementById('result1').value=XMLHttpRequest.status+":"+XMLHttpRequest.statusText+"\n"+errorThrown;
	 	    }
	   	   
	   	}
	   });
	}
	
	function successCustomAjaxJsonpWithParam(){
		debugger;
	}
	function successCustomAjaxJsonpWithParam(data){
		debugger;
    	document.getElementById('result1Div').style['backgroundColor']='#32CD32';
  	    document.getElementById('result1').value=JSON.stringify(data);
  	    setQueryState("查询成功","#32CD32");
	}
	
	//后台优先使用jsonp属性作为jsonp值
	function doCustomAjaxJsonpWithJP(p){
		var url='';
		url=encodeURI(encodeURI(p.url)); 
		if(p.param.hasOwnProperty('jsonp')){
			if(!p.param.jsonp){
				p.param.jsonp='';
			}
		}else{
			p.param.jsonp='';
		}
		var urlSuffix='';
		if(url.indexOf('?')>-1){
			urlSuffix="&"+p.param.jsonp+"=successJsonpCallback";
		}else{
			urlSuffix="?"+p.param.jsonp+"=successJsonpCallback";
		}
		$.ajax({
	       type: "get",
	       cache:false,
	       processData:false,
	       context:this,//设置success中的this为当前中的this或某一节点
	       crossDomain:true,//跨域请求为true如果你想强制跨域请求（如JSONP形式）同一域，设置crossDomain为true。
	       url: url+urlSuffix,
	       data: p.param,
	       jsonp:p.param.jsonp,//后台f_jsonp属性.在一个jsonp请求中重写回调函数的名字。这个值用来替代在"callback=?"这种GET或POST请求中URL参数里的"callback"部分，比如{jsonp:'onJsonPLoad'}会导致将"onJsonPLoad=?"传给服务器。
	       jsonpCallback:"successJsonpCallback",
	       dataType: "jsonp",
	       success: function(data, textStatus, jqXHR){
	    	   this;//param
	        	debugger;
	        	setQueryState("查询成功","#32CD32");
//	        	var aa=data;
	        },
	        statusCode:{200:function(d1,d2,d3){
	        	//参数类似error
	        	//d1:{readyState: 4, status: 200, statusText: "success"}
		    	//d2 = "parsererror"
	        	debugger;
	        }},
	       error:errorCallback
	   });
	}
	
	function successJsonpCallback(data){
		debugger;
		document.getElementById('result1Div').style['backgroundColor']='#32CD32';
		document.getElementById('result1').value=JSON.stringify(data);
		setQueryState("查询成功","#32CD32");
	}
	//被当作方法执行
	function successJsonpCallback(){
		debugger;
	}
	/**
	ajax成功方法
	**/
	function successCallback(data){
		document.getElementById('result1Div').style['backgroundColor']='#32CD32';
		document.getElementById('result1').value=JSON.stringify(data);//
		setQueryState("查询成功","#32CD32");
	}
	
	/**
	ajax错误方法
	**/
	function errorCallback(XMLHttpRequest, textStatus, errorThrown) {
	    // 通常 textStatus 和 errorThrown 之中
	    // 只有一个会包含信息
	    this; // 调用本次AJAX请求时传递的options参数
	    setQueryState("查询失败","#CC0000");
	    debugger;
	    if(XMLHttpRequest.readyState=='4' && XMLHttpRequest.status=='200'&&
	    		textStatus=='parsererror' && errorThrown){//hasOwnProperty
	    	if(XMLHttpRequest.responseText!=undefined){
	    		document.getElementById('result1Div').style['backgroundColor']='#ADFF2F';
	    	    document.getElementById('result1').value=XMLHttpRequest.responseText;
	    	}
	    }else{
	    	 document.getElementById('result1Div').style['backgroundColor']='#CC0000';
	 	     document.getElementById('result1').value=XMLHttpRequest.status+":"+XMLHttpRequest.statusText+"\n"+errorThrown;
	    }
	   
	}
	
	function successJsonpEmptyCallback(){
		debugger;
	}
	//
	function successJsonpEmptyCallback(data){
		document.getElementById('result1Div').style['backgroundColor']='#ADFF2F';
	    document.getElementById('result1').value=JSON.stringify(data);
	    setQueryState("查询成功","#ADFF2F");
		debugger;
	}

	function setQueryState(content,color){
		document.getElementById('queryStateTxt').innerHTML=content;
		document.getElementById('queryStateDiv').style['backgroundColor']=color;
		document.getElementById('result1Div').style['backgroundColor']=color;
	}
	
	function doQuery(event){
	//	debugger;
		setQueryState("正在查询...","#009966");
		var v=document.getElementById("selAjaxTypeId").options[document.getElementById("selAjaxTypeId").selectedIndex].value;
		if(v=="0"){
			alert("选择查询类型");
			setQueryState("未选择选择查询类型未选择","#CC0000");
			return;
		}
		
		var str=document.getElementById('selectedAjaxTypeData').value;
		var selp;
		try{
				selp=JSON.parse(str);
				if(!document.getElementById('isDefaultInput').checked){
					selp={label:selp.label,
							value:selp.value,
							url:trim(document.getElementById('queryUrl').value),
							param:JSON.parse($.trim($('#paramArea').val()))};
				}
			} catch (e) {
			 if (e instanceof EvalError) {
		//	     console.log(e.name + ":" + e.message);
			 }else if (e instanceof RangeError) {
		//		 console.log(e.name + ": " + e.message);
			 }else if (e instanceof ReferenceError) {
	//			 console.log(e.name + ": " + e.message);
			 } else if (e instanceof SyntaxError) {
//				 console.log(e.name + ": " + e.message);
			 } else if (e instanceof TypeError) {
	//			 console.log(e.name + ": " + e.message);
			 } else if (e instanceof URIError) {
		//s		 console.log(e.name + ": " + e.message);
			 } 
			 // etc 
			}
		if(selp.value=='ajaxGet'){
			doAjaxGet(selp);
		}else if(selp.value=='ajaxPost'){
			doAjaxPost(selp);
		}else if(selp.value=='ajaxGetWithParam'){
			doAjaxGetWithParam(selp);
		}else if(selp.value=='ajaxPostWithParam'){
			doAjaxPostWithParam(selp);
		}else if(selp.value=='ajaxJsonp'){
			doAjaxJsonp(selp);
		}else if(selp.value=='ajaxJsonpWithParam'){
			doAjaxJsonpWithParam(selp);
		}else if(selp.value=='ajaxGetWithParam2'){
			doAjaxGetWithParam2(selp);
		}else if(selp.value=='ajaxPostWithParam2'){
			doAjaxPostWithParam2(selp);
		}else if(selp.value=='ajaxJsonpWithParam2'){
			doAjaxJsonpWithParam2(selp);
		}else if(selp.value=='otherGet'){
			doOtherGet(selp);
		}else if(selp.value=='otherPost'){
			doOtherPost(selp);
		}else if(selp.value=='customAjaxJsonpWithParam'){
			doCustomAjaxJsonpWithParam(selp);
		}else if(selp.value=='customAjaxJsonpWithJP'){
			doCustomAjaxJsonpWithJP(selp);
		}else if(selp.value=='formPostRequestWithParam'){
			doFormPostRequestWithParam(selp);
		}else if(selp.value=='formGetRequestWithParam'){
			doFormGetRequestWithParam(selp);
		}else if(selp.value=='javaGetData'){
			doJavaGetData(selp);
		}else if(selp.value=='javaPostData'){
			doJavaPostData(selp);
		}else if(selp.value=='javaRestData'){
			doJavaRestData(selp);
		}else if(selp.value=='flashHttpService'){
			doFlashHttpService(selp);
		}else if(selp.value=='nginxProxy'){
			doNginxProxy(selp);
		}
	}
	
	function doOtherGet(p){
		var url='';
		if(typeof(p.url) == 'string' ){
			url=p.url;
		}else{
			url=''+p.url;
		}
		$.ajax({
	          url:url,//encodeURIComponent(p.url),
	          data: p.param,
	          dataType:"json",
	          type:"GET", 
	          success:function(data){
	        	  // debugger;
	        	  var str=JSON.stringify(data);
	        	  document.getElementById('result1Div').style['backgroundColor']='#32CD32';
	        	  document.getElementById('result1').value=JSON.stringify(data);
	        	  setQueryState("查询成功","#32CD32");
	          },
	          error:function (XMLHttpRequest, textStatus, errorThrown) {
	        	    // 通常 textStatus 和 errorThrown 之中
	        	    document.getElementById('result1Div').style['backgroundColor']='#CC0000';
	        	  document.getElementById('result1').value=XMLHttpRequest.status+":"+XMLHttpRequest.statusText;
	        	  setQueryState("查询失败","#CC0000");
	        	}
	       });
	}
	
	function doOtherPost(p){
		var url='';
		if(typeof(p.url) == 'string' ){
			url=p.url;
		}else{
			url=''+p.url;
		}
		$.ajax({
	          url:url,
	          data: p.param,
	          dataType:"json",
	          type:"POST", 
	          success:function(data){
	        	  var str=JSON.stringify(data);
	        	  document.getElementById('result1').value=JSON.stringify(data);
	        	  document.getElementById('result1Div').style['backgroundColor']='#32CD32';
	        	  setQueryState("查询成功","#32CD32");
	          },
	          error:function (XMLHttpRequest, textStatus, errorThrown) {
	        	    // 通常 textStatus 和 errorThrown 之中
	        	    document.getElementById('result1Div').style['backgroundColor']='#CC0000';
	        	  document.getElementById('result1').value=XMLHttpRequest.status+":"+XMLHttpRequest.statusText;
	        	  setQueryState("查询失败","#CC0000");
	        	}
	       });
	}
	
	function chkClick(event){
//		jsToFlex();
//		var chk=event.currentTarget;//IE中无效
// 		var chk=document.getElementsByName("chkParam");
// 		document.getElementById('selectedAjaxTypeData').value;
// 		chk.checked;
        var inputs = document.getElementsByTagName("input");
     	for (var i = 0; i < inputs.length; i++) {
         	if (inputs[i].type == "checkbox") {
         		if(inputs[i].value=="isDefaultUrlAndParam"){
                 	if (inputs[i].checked) {
                 		document.getElementById("queryUrl").disabled = true;
        				document.getElementById("paramArea").disabled = true;
                 	}else{
                 		document.getElementById("queryUrl").disabled = false;
        				document.getElementById("paramArea").disabled = false;
                 	}
         		}
         	}
     	}
		/* debugger; */
	}
	
	function addChk(){
		var executerDiv=$("executerDiv");
	    executerDiv.innerHTML="";
	    var ul=document.createElement("ul");
	    for(var i=0;i<tableDatas.length;i++){
	        var arr=tableDatas[i];

	        // 加入复选框
	        var checkBox=document.createElement("input");
	        checkBox.setAttribute("type","checkbox");
	        checkBox.setAttribute("id",arr[0]);
	        checkBox.setAttribute("name", arr[1]);

	        var li=document.createElement("li");
	        li.appendChild(checkBox);        
	        li.appendChild(document.createTextNode(arr[1]));
	        ul.appendChild(li);        
	    }    

	    executerDiv.appendChild(ul);
	}
	
	function cancelHandle(event){
		document.getElementById('result1').value='';
		document.getElementById('result2').value='';
	}
	
	function trim(str)
    {
        return str.replace(/(^\s*)|(\s*$)/g, ""); 
	}
	
	function jsonStringify(data,space){
	    var seen=[];
	    return JSON.stringify(data,function(key,val){
	        if(!val||typeof val !=='object'){
	            return val;
	        }
	        // if(seen.indexOf(val)!==-1){
	        //     return '[Circular]';
	        // }
	        seen.push(val);
	        return val;
	    },space);
	}
	
	function formatJson(event){
		if(document.getElementById('result1').value==""){
			return;
		}
		var obj=JSON.parse(document.getElementById('result1').value);
		var str=jsonStringify(obj,4);
		document.getElementById('result2').value=str;
	}

</script>
</head>
<body style="padding-left:0px;padding-right:0px;margin-right:0px;margin-left:0px;">
	<input id='ajaxTypeData' type="hidden" />
	<input id='selectedAjaxTypeData' type="hidden" />

	<div class="container" style="margin-top:10px;">
		<div class="row">
			<div class="input-group input-group-lg">
				<span class="input-group-addon">备注:</span>
				<textarea id="bz" disabled style="height:120px;width:100%;" rows="5" cols="20"></textarea>
			</div>
		</div>
	</div>
	
	<div class='container' style="padding:5px;">
		<div class="row" style="height:50px;vertical-align:middle;text-align:left;line-height:50px;">
			<div class="col-lg-12" style="background-color:#eeeeee;">
				<fieldset style="width:100%;height:50px;">
					<!-- <legend style="font-size:14px;">请求类型</legend> -->
					<span class="" style="vertical-align:middle;text-align:left;height:50px;line-height:50px;">请求类型:</span>
					<label class="checkbox-inline" style="vertical-align:middle;text-align:left;height:50px;line-height:50px;">
  						<input type="radio"  name="radio"  style="margin-left:10px;" value="all" checked="checked" onclick="radioCheck(event)">all
					</label>
					<!-- <label><input type="radio" style="margin-left:10px;"  name="radio" value="all" checked="checked" onclick="radioCheck(event)" />all</label> -->
					<label><input type="radio" style="margin-left:10px;" name="radio" value="get"  onclick="radioCheck(event)" />get</label>
					<input type="radio" style="margin-left:10px;"  name="radio" value="post" onclick="radioCheck(event)"  /><label class="form-control-static">post</label>
					<input type="radio" style="margin-left:10px;" name="radio" value="jsonp" onclick="radioCheck(event)"  /><label>getJsonp</label>
					<!-- <input type="radio" style="margin-left:10px;" name="radio" value="flash" onclick="radioCheck(event)"  /><label>flash</label> -->
					<label class="checkbox-inline" style="vertical-align:middle;text-align:left;height:50px;line-height:50px;">
  						<input type="radio"  name="radio"  style="margin-left:0px;vertical-align:middle;text-align:left;height:50px;line-height:50px;" value="flash" onclick="radioCheck(event)">flash
					</label>
					<input type="radio" style="margin-left:10px;" name="radio" value="nginx" onclick="radioCheck(event)"  /><label>nginx</label>
		         	<input name="" value="1" style="margin-left:10px;" type="checkbox" checked="checked" onclick="chkClick(event)" />get
		         	<input name="33" value="1" style="margin-left:10px;" type="checkbox" onclick="chkClick(event)" />post
	<!-- 	         	 <input type="checkbox" disabled = "disabled" /> -->
					<select id='selAjaxTypeId'  onchange='ajaTypeChoice(event)' >
						<option value="0" selected>==请选择==</option>
					</select>
				</fieldset>
				
				
			</div>
			
		</div>
		
		<!-- <table class="table">
		   <tbody>
		      <tr>
		         <td>Tanmay</td>
		         <td>Bangalore</td>
		      </tr>
		      <tr>
		         <td>Sachin</td>
		         <td>Mumbai</td>
		      </tr>
		   </tbody>
		</table> -->

		<!-- <div style="float:left;background-color:#dddddd;margin-top:10px;height:30px;" >
			<label style="float:left;height:30px;width:200px;vertical-align:middle;text-align:left;line-height:30px;">
			  			<input type="checkbox" id='isDefaultInput'  name="chkParam" checked='checked' style="height:30px;vertical-align:middle;text-align:left;line-height:30px;" value="isDefaultUrlAndParam" onclick="chkClick(event)">使用默认地址及参数
			</label>
			<input id='queryUrl' style="float:left;margin-left:200px;height:30px;width:800px;vertical-align:middle;text-align:left;line-height:30px;margin-bottom:10px;" disabled type='text' value='http://127.0.0.1:8083/test/rest/TestRests/test/p1'></input>
		
		</div> -->

		<div class="row" style="display:block;height:30px;vertical-align:middle;text-align:left;margin-top:5px;background-color:#dddddd;margin-bottom:10px;">
			 <div class="col-lg-2" >
				<label class="" style="height:30px;vertical-align:middle;text-align:left;line-height:30px;">
			  			<input type="checkbox" id='isDefaultInput'  name="chkParam" checked='checked' style="height:30px;vertical-align:middle;text-align:left;line-height:30px;" value="isDefaultUrlAndParam" onclick="chkClick(event)">使用默认地址及参数
				</label>
			</div>
			<div class="col-lg-10" class="input-group has-feedback">
				<input id='queryUrl' style="height:30px;width:95%;vertical-align:middle;text-align:left;line-height:30px;margin-bottom:10px;" disabled type='text' value='http://127.0.0.1:8083/test/rest/TestRests/test/p1'></input>
				<span class="glyphicon glyphicon-ok" style=""></span>
			</div> 
			<!-- <div class="col-lg-11" style="margin-left:-15px;">
				<div class="input-group input-group-lg" style="" >
				  <span class="input-group-addon" style="">
						<label class="" style="">
							<input type="checkbox" id='isDefaultInput'  name="chkParam" checked='checked' style="" value="isDefaultUrlAndParam" onclick="chkClick(event)">使用默认地址及参数
				  		</label>
				  </span>
				  
				<input id='queryUrl' class="form-control" style="width:100%;height:30px;" disabled type='text' value='http://127.0.0.1:8083/test/rest/TestRests/test/p1'></input>
				<span class="input-group-addon">
					<span class="glyphicon glyphicon-ok" style=""></span>
				</span>
				</div>
			</div> -->
		</div>

<!-- 		参数 -->	
		<div id='paramDiv' class='paramDivC clearFix' style="margin-top:10px;height:150px;vertical-align:middle;text-align:left;line-height:150px;">
			<!-- <label style="float:left;margin-left:5px;">json参数：</label> -->
			<span class="text-left" style="height:150px;vertical-align:middle;text-align:left;line-height:150px;">json参数：</span>
			<textarea id='paramArea' disabled style="width:90%;line-height:14px;height:150px;"></textarea>

		</div>
<!-- 		操作 -->
		<div style="margin-top:5px;margin-bottom:5px;">
			<!-- <button id='queryBtn' style="" onclick='doQuery(event)'>执行</button> -->
			<button type="button" class="btn btn-default btn-sm" onclick='doQuery(event)'>
         		<span class="glyphicon glyphicon-asterisk"></span>执行
       	 	</button>
       	 	<button type="button" class="btn btn-default btn-sm" onclick='cancelHandle(event)'>
         		<span class="glyphicon glyphicon-remove"></span>清除结果
       	 	</button>
       	 	<button type="button" class="btn btn-default btn-sm" onclick='formatJson(event)'>
         		<span class="glyphicon glyphicon-wrench"></span>格式化json数据
       	 	</button>
			<!-- <button id='cancelBtn' onclick='cancelHandle(event)'>清除结果</button> -->
			<!-- <button id='cancelBtn' onclick='formatJson(event)'>格式化json数据</button> -->
		</div>		
<!-- 		结果 -->
		<div class="container">
			<div class="row" style="background-color:#ddd;">
				<div class="col-lg-6" id='result1Div' style="padding:10px;">
					<span style="margin-top:10px;margin-left:0px;">结果1：</span>
					<textarea id='result1' style="width:100%;display:inline;height:150px;"  ></textarea>
				</div>

				<div class="col-lg-6" id='result2Div' style="padding:10px;">
					<span style="">结果2：</span>
				<textarea id='result2' style="width:100%;height:150px;" ></textarea>
				</div>
			</div>
			<div class="row" style="background-color:#EEEEEE">
				<div class="col-lg-12" id="queryStateDiv" style="background-color:#EEEEEE">
				<label id='queryStateTxt' >...</label>
				</div>
			</div>
		</div>

	</div>

	 <div id="flashContent" style="display:none;">
      </div>
        <noscript>
            <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="httpServiceUtil">
                <param name="movie" value="httpServiceUtil.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#ffffff" />
                <param name="allowScriptAccess" value="sameDomain" />
                <param name="allowFullScreen" value="true" />
                <!--[if !IE]>-->
                <object type="application/x-shockwave-flash" data="flashHttpService/httpServiceUtil.swf" width="100%" height="100%">
                    <param name="quality" value="high" />
                    <param name="bgcolor" value="#ffffff" />
                    <param name="allowScriptAccess" value="sameDomain" />
                    <param name="allowFullScreen" value="true" />
                <!--<![endif]-->
                <!--[if gte IE 6]>-->
                <!--<![endif]-->
                <!--[if !IE]>-->
                </object>
                <!--<![endif]-->
            </object>
        </noscript> 
</body>
</html>